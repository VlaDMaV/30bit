# 30-битная практика

## Проект Макеева Владислава ```tg - @vladmav_11```

###

Для данного проекта из списка тем были выбраны две: BACK и FRONT. В папке bot находятся все нужные файлы для деплоя бота, а в папке site для деплоя сайта с сервером для приёма заявок.

## Разворот проекта

* Клонировать репозиторий
    ```bash
    git clone https://github.com/VlaDMaV/30bit.git
    ```

* Перейти в директорию проекта
    ```bash
    cd ./30bit
    ```
  
## Деплой бота

* Перейти в директорию бота
    ```bash
    cd ./bot
    ```
  
* Создать .env файл (можно полностью скопировать .env.example и заменить внутри данныке на свои)

* Собрать контейнер (нужен установленный docker compose)
    ```bash
    docker build -t mybot .
    ```

* Запустить бота
    ```bash
    docker run --env-file .env mybot
    ```

## Деплой сайта и сервера

* Перейти в директорию сайта
    ```bash
    cd ./site
    ```

* Собрать контейнер 
    ```bash
    docker build -t mysite .
    ```

* Запустить сайт
    ```bash
    docker run -d -p 8080:80 mysite
    ```
  
* Запустить сервер для приёма заявок с сайта
* Перейти в директорию сайта
    ```bash
    cd ./server
    ```

* Собрать контейнер 
    ```bash
    docker build -t my-express-app .
    ```

* Запустить сервер
    ```bash
    docker run -d -p 3000:3000 my-express-app
    ```

## Результат 

Данные контейнеры я накатил на свой домашний сервер. В виде сервера выступает raspberry pi 3B+
Так же для общего доступа использовал проброс портов (NAT) и протокол TCP для защиты данных. Благодаря пробросу портов
на моём роутере можно использовать "малинку" как хостинг. Поскольку у меня белый динамический ip у роутера был настроен 
DDNS, чтобы при смене ip всё равно иметь доступ к сайту, и выдано доменное имя для удобного доступа.
По итогу вы можете воспользоваться и оценить бота по его юзернейму ```@official30bit_bot```, а сайт по ссылке
```http://vladmav.ddns.net:8080```. Просьба в случае недосиупности сайта обратиться ко мне в личку (мало ли что произошло с 
платой, может свет выключили, постараюсь починить в кратчайшие сроки).


P.S. для просмотра логов контейнеров можно использовать:
```bash
    docker logs <container_id>
```